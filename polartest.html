<!DOCTYPE = 'html'>
<html>

    <head>
        <title> Polar! </title>
        <link href='http://www.kansascitystandard.com/kansas.css' type='text/css' rel = 'stylesheet' />

        <script src="http://www.kansascitystandard.com/processing.js" type="text/javascript"></script>

    </head>
    <body>
        <script id='sketch' type='application/processing'>



float[] hist = {30, 55, 89, 37, 44, 25, 80, 64, 70, 23, 90, 30, 55, 89, 37, 44, 25, 80, 64, 70, 23, 90, 30, 55, 89, 37, 44, 25, 80, 64, 70, 23, 90, 30, 55, 89, 37, 44, 25, 80, 64, 70, 23, 90};
float[] pointsBlue = {10, 56, 78, 100, 90, 80, 90, 70, 45, 56, 45, 56, 60, 30, 36, 43, 34, 47, 18, 20, 34, 56, 29, 40, 12, 15, 34, 23, 22, 65, 30, 19, 23, 25, 30, 43, 39, 22, 56, 35, 45, 33, 34, 20};
float[] pointsRed = {10, 56, 78, 100, 90, 80, 90, 70, 45, 56, 45, 56, 60, 30, 36, 43, 34, 47, 18, 20, 34, 56, 29, 40, 12, 15, 34, 23, 22, 65, 30, 19, 23, 25, 30, 43, 39, 22, 56, 35, 45, 33, 34, 20};
float[] pointsGreen = {10, 56, 78, 100, 90, 80, 90, 70, 45, 56, 45, 56, 60, 30, 36, 43, 34, 47, 18, 20, 34, 56, 29, 40, 12, 15, 34, 23, 22, 65, 30, 19, 23, 25, 30, 43, 39, 22, 56, 35, 45, 33, 34, 20};
float[] points = {10, 56, 78, 100, 90, 80, 90, 70, 45, 56, 45, 56, 60, 30, 36, 43, 34, 47, 18, 20, 34, 56, 29, 40, 12, 15, 34, 23, 22, 65, 30, 19, 23, 25, 30, 43, 39, 22, 56, 35, 45, 33, 34, 20};

boolean inCircle;
boolean red;
boolean blue;
boolean green;



void setup() {
    size(500, 500);

    inCircle = true;
    red = false;
    blue = false;
    green = false;
}

void draw(){
  background(255);

  update(mouseX, mouseY);

  rectMode(CORNER);


  fill(#0000FF, blue ? 100 : 20);
  stroke(0);
  rect(10, 10, 10, 10);
  fill(#FF0000, red ? 100 : 20);
  rect(25, 10, 10, 10);
  fill(#00FF00, green ? 100 : 20);
  rect(40, 10, 10, 10);

  ellipseMode(CENTER);
  stroke(0);
  noFill();
  ellipse(250, 250, 450, 450);
  stroke(200);
  for (int x = 1; x < 10; x++){
    float newWidth = 450 - x*45;
    ellipse(250, 250, newWidth, newWidth);
  }
  line(250, 25, 250, 475);
  line(25, 250, 475, 250);
  //stroke(255, 0, 0);
  noFill();
  //stroke(#FF0000);
  //arc(250, 250, 450, 450, 0, PI/3, PIE);
  fill(#CCFFFF, 30);
  stroke(109, 200, 200);
  beginShape();
  curveVertex(250+map(points[points.length-1], 0, 100, 0, 225)*cos(PI), 250+map(points[points.length-1], 0, 100, 0, 225)*sin(PI));
  for(int x = 0; x < hist.length; x++){
    //if (hist[x] >= m ){ hist[x] = (int)(m);}
    float newWidth = map(hist[x], 0, 100, 0, 450);
    float newData = map(pointsBlue[x], 0, 100, 0, 225);
    float segment = TWO_PI/(hist.length);
    //fill(#CCFFFF, 30);
    //arc(250, 250, newWidth, newWidth, x*segment+PI, (x+1)*segment+PI, PIE);
    fill(#0000FF, 20);
    curveVertex(250+newData*cos(x*segment+PI), 250+newData*sin(x*segment+PI));
  }
  curveVertex(250+map(pointsBlue[0], 0, 100, 0, 225)*cos(PI), 250+map(points[0], 0, 100, 0, 225)*sin(PI));
  endShape(CLOSE);
  stroke(#FF0000, 100);
  beginShape();
  curveVertex(250+map(points[points.length-1], 0, 100, 0, 225)*cos(PI), 250+map(points[points.length-1], 0, 100, 0, 225)*sin(PI));
  for(int x = 0; x < hist.length; x++){
    //if (hist[x] >= m ){ hist[x] = (int)(m);}
    float newWidth = map(hist[x], 0, 100, 0, 450);
    float newData = map(pointsRed[x], 0, 100, 0, 225);
    float segment = TWO_PI/(pointsRed.length);
    //fill(#CCFFFF, 30);
    //arc(250, 250, newWidth, newWidth, x*segment+PI, (x+1)*segment+PI, PIE);
    fill(#FF0000, 20);
    curveVertex(250+newData*cos(x*segment+PI), 250+newData*sin(x*segment+PI));
  }
  curveVertex(250+map(points[0], 0, 100, 0, 225)*cos(PI), 250+map(points[0], 0, 100, 0, 225)*sin(PI));
  endShape(CLOSE);
  stroke(#00FF00, 100);
  beginShape();
  curveVertex(250+map(points[points.length-1], 0, 100, 0, 225)*cos(PI), 250+map(points[points.length-1], 0, 100, 0, 225)*sin(PI));
  for(int x = 0; x < hist.length; x++){
    //if (hist[x] >= m ){ hist[x] = (int)(m);}
    float newWidth = map(hist[x], 0, 100, 0, 450);
    float newData = map(pointsGreen[x], 0, 100, 0, 225);
    float segment = TWO_PI/(pointsGreen.length);
    //fill(#CCFFFF, 30);
    //arc(250, 250, newWidth, newWidth, x*segment+PI, (x+1)*segment+PI, PIE);
    fill(#00FF00, 20);
    curveVertex(250+newData*cos(x*segment+PI), 250+newData*sin(x*segment+PI));
  }
  curveVertex(250+map(points[0], 0, 100, 0, 225)*cos(PI), 250+map(points[0], 0, 100, 0, 225)*sin(PI));
  endShape(CLOSE);
}

void update(int x, int y){
  //to keep track of theta and rho
  float theta = atan2(y-250, x-250)+PI;
  float segment = TWO_PI/points.length;
  float rho = sqrt(pow((x-250), 2) + pow((y-250), 2));
  for(int z = 0; z < points.length; z++){
    if (theta > z*segment && theta <= (z+1)*segment && rho < 225){
     fill(#00FF00, 20);
     arc(250, 250, 450, 450, z*segment+PI, (z+1)*segment+PI);
     fill(#0000FF, 20);
     stroke(#FF0000);
     noFill();
     ellipse(250, 250, 2*rho, 2*rho);
     line(250, 250, 225*cos(theta-PI)+250, 225*sin(theta-PI)+250);
     //arc(250, 250, 450, 450, (z+1)*segment+PI, TWO_PI, PIE);
     //arc(250, 250, 450, 450, 0, z*segment+PI, PIE);
     //println("theta: " + theta + " rho: " + rho);
    }
  }
  if (rho > 225){
    inCircle = false;
  } else {
    inCircle = true;
  }
}

void mouseDragged() {
  float theta = atan2(mouseY-250, mouseX-250)+PI;
  float segment = TWO_PI/points.length;
  float rho = sqrt(pow((mouseX-250), 2) + pow((mouseY-250), 2));
  int x = floor(theta/segment);
  if (inCircle && red){
    pointsRed[x%44] = map(rho, 0, 225, 0, 100);
    //println("rho: " + rho);
  }
  if (inCircle && blue){
    pointsBlue[x%44] = map(rho, 0, 225, 0, 100);
    //println("rho: " + rho);
  }
  if (inCircle && green){
    pointsGreen[x%44] = map(rho, 0, 225, 0, 100);
    //println("rho: " + rho);
  }
}

void keyPressed() {
  if (key == '1'){
    red = false;
    blue = true;
    green = false;
  }
  if (key == '2'){
    red = true;
    blue = false;
    green = false;
  }
  if (key == '3'){
    red = false;
    blue = false;
    green = true;
  }
}
        </script>

        <canvas>
        </canvas> <br>
        Polar! <br>
        <span style="font-size:10pt"> Press 1 to edit blue, 2 to edit red, and 3 to edit green. </span>
</html>

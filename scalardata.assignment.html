<!doctype html>
<html>
    <head>
        <title> Scalar Data Assignment </title>
        <style>
            #random_imgs {
                margin-top: 10px;
                float:right;
                margin-right:0px;
                margin-left:10px;
                margin-bottom: 0px;
            }

        </style>
        <link href='http://sci.utah.edu/~miriah/teaching.css' rel='stylesheet' type'text/css' />
    </head>

    <body>
        <span style='font-size: 40pt'> Scalar Data </span> <br> <br> <br>

    <p> <b> Data Reader </b> <br />
This time around, you will be writing your own data reader in Processing
to generate an image. To start off, you will be using this data set:
<a href="http://sci.utah.edu/~miriah/cs6630/protected/scalar-data/brain.nrrd" class="nav">brain.nrrd</a>.
Note that this data uses the NRRD file format. You can find the
<a href="http://teem.sourceforge.net/nrrd/format.html" class="nav">
definition of the NRRD file format</a> as well as several different
<a href="http://teem.sourceforge.net/nrrd/files/index.html" class="nav">
example NRRD files</a> online. </p>

<p> It is important to understand what is represented in the header and how
this connects to the format of the data below the header. In
particular, the <i> dimension </i> component describes that we have a
regular 2-D grid. Also, the <i> sizes </i> component gives us the width
and height of this grid, respectively. Lastly, the <i> encoding </i>
component tells us that we have data written as text (human-readable). </p>

<p> After the header, each row of our data represents a single point in the
grid. For this assignment, each row contains one scalar value. The grid
iterates through the x-axis first, then the y-axis. </p>

<div id="random_imgs">
  <img src="http://sci.utah.edu/~miriah/cs6630/images/scalar-data/brain.png" width="125" height="175" />
</div>

<p> With the NRRD format in mind, write your data reader in Processing that
will store the data in your sketch. Storing the data in a 2-D
array is recommended. For more on 2-D arrays, see the corresponding
<a href="http://processing.org/tutorials/2darray/" class="nav">
Processing tutorial</a>. Be sure that you also read in the important values
from the header, particularly the <i> sizes </i> components, to set the
two dimensions of your data array. You should only be reading in data
during the setup() loop. Some functions to consider:
loadStrings(), for(), split(), & float(). </p>

<p> Once you have imported the data into your sketch, create a grayscale image
using the same dimensions as the data grid, see the example to the right.
For drawing each data point, we
recommend using either point(), rect(), or PImage(). Be mindful of your fill() and stroke()
values in your draw loop. You may wish to add a mouse or key command to save your
sketch as an image: save(). </p>

<!-- <p> In your digital notebook, add in your grayscale image, and be sure to answer the following: </p> -->
<!-- <ul> -->
<!--   <li> was this easy to import the data? </li> -->
<!--   <li> what problems did you have? </li> -->
<!-- </ul> -->

<p> <b> Applying a Color Map </b> <br />
<div id="random_imgs">
  <img src="http://sci.utah.edu/~miriah/cs6630/images/scalar-data/brain-color.png" width="125" height="175" />
</div>
Time to apply some color! First, choose an appropriate color map from ColorBrewer
or another source. Interpret this color map into a continuous space; do not use
a binned color map. One way to do this is to use two or three colors that are
starting, middle, and ending values for your color map. You will need
a function that will take a scalar value and then map it to a
color along your new continuous colormap.</p>

<p> Now, for each scalar value, map or convert these data values into colors using
your color map. This assigns a color to each pixel of your image. This should
produce a continuous color image for your data. Some functions to consider:
map(), lerpColor(). </p>

<p> In your digital notebook, add your color mapped image, and be sure to answer: </p>
<ul>
  <li> Where did you get your color map? </li>
  <li> What makes it an appropriate color map for this data? </li>
</ul>

<p> You may want to experiment with several colormaps. If you do, make
sure to include screenshots of your work!</p>

<p> <b> Interpolating the Grid </b> <br />
<div id="random_imgs">
  <img src="http://sci.utah.edu/~miriah/cs6630/images/scalar-data/brain-color-no-interp.png" width="100" height="140" />
</div>
Next, we will make our image larger by changing the size of our Processing sketch.
Instead of using the sizes of our grid, we will fix the <b>height</b> of our sketch to 800 pixels.
Keep the same aspect ratio for the grid (preserve the ratio of width to height).
After creating a larger sketch, map your original data grid values into the appropriate
pixel values to fill the screen. This will result in an image that looks pixelated (see right, top). </p>

<p> Keep in mind that Processing expects integers in its size() function, but division
with integers can result in rounding issues in programming languages. You can always
convert or cast your data from floating point numbers into integers for this function. </p>

<div id="random_imgs">
  <img src="http://sci.utah.edu/~miriah/cs6630/images/scalar-data/brain-color-interp.png" width="100" height="140" />
</div>

<p> To smooth out our image, we will perform bilinear interpolation of the data.
This process effectively maps every pixel on our screen into the data grid,
in-between four values of that grid. Then, we find an interpolated value between
these four grid points. Now, this pixel uses this interpolation to get a color from
our color map (see right, bottom). To properly see the difference between the two examples,
open them in a new tab or download to compare. Also, be mindful of pixels on the edges
of the image. </p>

<p> In your digital notebook, add your interpolated image, and be sure to answer: </p>
<ul>
  <li> What, if anything, makes interpolation of your data tricky? </li>
  <li> Do you notice anything odd about the data? Do any values stick out? </li>
</ul>

<p> Note that in the next part of the assignment you will be using a
different technique to visualize this data (isocontours). You will
need to switch between these two modes use keystrokes. This is an FYI
for planning how you structure this part of the assignment! </p>



<p> <b> Isocontours using Marching Squares </b> <br />
<div id="random_imgs">
  <img src="http://sci.utah.edu/~miriah/cs6630/images/scalar-data/test-contour.png" width="125" height="125" />
</div>
Isocontours are another technique for exploring scalar data sets. In 2D, these are
simply a set of isolines overlaid on your image. For generating isocontours, you will be
implementing the marching squares algorithm. This algorithm generates isolines along
the different cells of our data grid. Before you get started with this
part of the assignment, you will want to read <a href="http://sci.utah.edu/~miriah/cs6630/protected/Telea-2D.pdf" class="nav">these few pages</a> which
include a step-by-step description of the algorithm.
</p>

<p> Write your own marching squares algorithm to generate and draw isocontours. Allow
the user to switch between our color-mapped image and the isocontours using the 'c' key.
For the isocontours mode, you must draw all the isocontours at a single isovalue.
To draw isolines in Processing, you can use beginShape()/endShape() or line(). </p>

<p> To help with debugging, we have provided you with a test data set:
<a href="http://sci.utah.edu/~miriah/cs6630/protected/scalar-data/test.nrrd" class="nav">test.nrrd</a>. This data set
is just random noise, but at an isovalue of 32700 it hits all 16 cases of marching
squares. We have also provided you with a sample image to see the properly generated
isocontours (see right, top). </p>

<div id="random_imgs">
  <img src="http://sci.utah.edu/~miriah/cs6630/images/scalar-data/brain-contour.png" width="125" height="175" />
</div>

<p> Next, with your working marching squares algorithm, test different isovalues
on the brain data set. See what values of the data highlight different portions of the
image. Take note of potentially interesting or uninteresting ranges of this data set.
We have provided another sample image at isovalue 176 (see right, bottom). Feel free
to play around with interactions to set or change isovalues. This can allow you to more
easily explore the data set, but it is not required. </p>

<p> In your digital notebook, be sure to add an image of the test data set at the same
isovalue. Additionally, add several images of intereseting isovalues you found in the
brain data set. Be sure to also answer: </p>
<ul>
  <li> Are there any problems with your marching squares algorithm? </li>
  <li> What is an interesting isovalue on the brain data set? Why? </li>
  <li> Compared to a color map, are there any tasks that isocontours
  seem more effective for? Why or why not? Which technique do you
  think is better?</li>
</ul>

<p> <b> Extra Credit 1</b><br/>
Instead of using bilinear interpolation in both your colormapping and
isocontouring techniques, implement bicubic interpolation. This
is a different interpolation function for reconstructing data values
between grid vertices. Obtain
images using both techniques and compare them. Feel free to try out different
sizes of images to compare the two interpolation methods. Include
sample images of both bilinear and bicubic
in your digital notebook, and answer the following: </p>
<ul>
  <li> What does bicubic interpolation change in the output image? </li>
  <li> Does bicubic interpolation make a difference when we have a larger image? </li>
  <li> Are there any features that bicubic interpolation is better for? </li>
</ul>

<p>Allow the user to switch between bilinear and bicubic interpolation
methods using the 'i' key.</p>

<p> <b> Extra Credit 2</b><br/>
The complete marching squares algorithm can be written in just three
lines of "real" code. For those of you optimization-lovers out there,
can you figure this out? Hint: the three lines of Processing code will
go between beginShape() and endShape() calls. Include your nifty code snippet in
your digital notebook. </p>

<p> <b> Data Exploration </b> <br />
Now that you have explored the brain data set, let's look at a new scalar grid!
We are providing a height field data set, showing the elevation around Mt. Hood:
<a href="http://sci.utah.edu/~miriah/cs6630/protected/scalar-data/mtHood.nrrd" class="nav">mtHood.nrrd</a>. </p>

<div id="random_imgs">
  <img src="http://sci.utah.edu/~miriah/cs6630/images/scalar-data/mtHood.png" width="175" height="175" />
</div>

<p> First, test your color map technique. You can see a sample image to the right;
the values are not as simple as they were in our previous data sets. You will likely
have to adjust your color map to get a similar image. Play around with this, and feel
free to explore different color maps for this data set that may be more appropriate. </p>

<p> Then, explore different isocontours. Try to find interesting
values, patterns that you maybe could not see in the color map. Compare how these contours
look versus the contours you saw in the brain data set. </p>

<p> In your digital notebook, include a couple images showing your color map and changes
for the mtHood data set, along with a couple images for isocontours. Additionally, answer
the following: </p>
<ul>
  <li> How did you adjust your color map for the mtHood data set? </li>
  <li> Did the isocontours in the mtHood dataset differ from the brain data set? Why? </li>
  <li> For the brain and mtHood data sets, were either color maps or isocontours more effective
    for either one of these data sets? Why? </li>
</ul>

<p> <b> Data Sets </b> <br/>
We have provided the following three data sets for this assignment.
They all use the
<a href="http://teem.sourceforge.net/nrrd/format.html" class="nav">
    NRRD file format</a>. </p>

<p> <a href="http://sci.utah.edu/~miriah/cs6630/protected/scalar-data/brain.nrrd" class="nav">brain.nrrd</a>:
This data set contains scalar values measured from a 2D slice of a brain. </p>

<p> <a href="http://sci.utah.edu/~miriah/cs6630/protected/scalar-data/test.nrrd" class="nav">test.nrrd</a>:
This data set is a randomly-generated 2D grid of noise. <i> source: </i>
<a href="http://people.cs.uchicago.edu/~glk/" class="nav">Gordon Kindlmann</a> </p>

<p> <a href="http://sci.utah.edu/~miriah/cs6630/protected/scalar-data/mtHood.nrrd" class="nav">mtHood.nrrd</a>:
This data set contains scalar values measured from a 2D spatial grid
which represents a height field around Mount Hood in Oregon. </p>

<p> <b> Recommended Resources </b> <br/> <ul>
  <li>
    <a href="http://processing.org/reference/" class="nav">Processing Language Reference</a>
  </li>
  <li>
    <a href="http://teem.sourceforge.net/nrrd/files/index.html" class="nav">NRRD File Format Examples</a>
  </li>
  <li>
    <a href="http://en.wikipedia.org/wiki/Bilinear_interpolation" class="nav">Bilinear Interpolation</a>
  </li>
  <li>
    <a href="http://en.wikipedia.org/wiki/Bicubic_interpolation" class="nav">Bicubic Interpolation</a>
  </li>
</ul> </p>

<p> <b> Submission Details </b> <br/>
As before, your digital notebook may be a PDF file, HTML webpage, or a URL to a
publicly available site or blog, such as a free
<a class="nav" href="http://www.blogger.com/">Blogger account</a>.
The notebook should include screenshots of your visualization. </p>

<p> Also, you will be submitting your final Processing code for this assignment.
Please <b>ZIP</b> up your entire project directory (code and data) to include
in your submission. We expect to be able to run your visualization as is. You
may either submit the code in
<a class="nav" href="https://utah.instructure.com/courses/244719/assignments">Canvas</a>,
or host it online with a link to it in your digital notebook. </p>

<p> For the final submission in
<a class="nav" href="https://utah.instructure.com/courses/244719/assignments">Canvas</a>,
please submit your digital notebook (<b>PDF</b> or <b>ZIP</b>) with your code (<b>ZIP</b>)
or a link to your digital notebook (<b>URL</b>) which points to your code (<b>ZIP</b>). </p>

</div>

</body>
</html>

